- if can?(current_user, :push_code, @project)
  .pull-right
    .create-merge-request-dropdown-wrap{ data: { path: can_create_branch_namespace_project_issue_path(@project.namespace, @project, @issue) } }
      %span.btn.btn-grouped.unavailable.hide{ disabled: 'disabled' }
        = icon('exclamation-triangle')
        New branch unavailable

      .btn-group.create-merge-request-dropdown.available.hide
        = link_to create_mr_path, title: "New Merge Request", class: 'btn btn-create btn-inverted js-create-merge-request' do
          Create Merge Request
        %button.btn{ type: 'button', class: 'btn btn-create btn-inverted dropdown-toggle', data: { 'dropdown-trigger' => '#create-merge-request-dropdown' } }
          = icon('caret-down')
        %ul.dropdown-menu.dropdown-menu-align-right#create-merge-request-dropdown{ data: { dropdown: true } }
          %li.filter-dropdown-item
            = link_to namespace_project_branches_path(@project.namespace, @project, branch_name: @issue.to_branch_name, issue_iid: @issue.iid), method: :post, class: 'btn', title: @issue.to_branch_name do
              Create branch
